<!DOCTYPE html>
<html ng-app="SatoshiLabsHomework">
  <head>
    <meta charset="utf-8">
    <meta name="author" content="Petr Huřťák">
    <meta name="description" content="SatoshiLabs homework">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <title>Password manager</title>

    <link rel="stylesheet" href="css/vendor.css">

    <link rel="stylesheet" href="css/main.css">
  </head>
  <body>

    <h2>Password manager</h2>

    <div ng-controller="PasswordsCtrl">
      <!-- Add password dialog -->
      <div class="modal fade" id="addPasswordModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">
                <span aria-hidden="true">&times;</span>
                <span class="sr-only">Close</span>
              </button>
              <h4 class="modal-title" id="myModalLabel">
                <span class="glyphicon glyphicon-file"></span>
                Add new password
              </h4>
            </div>
            <div class="modal-body">
              <div class="row">
                <div class="form-group col-sm-6">
                  <label for="form-name">
                    <span class="glyphicon glyphicon-tag"></span>
                    Name
                  </label>
                  <input
                    type="text"
                    class="form-control"
                    id="form-name"
                    ng-model="formAdd.name"
                    >
                </div>
                <div class="form-group col-sm-6">
                  <label for="form-website">
                    <span class="glyphicon glyphicon-globe"></span>
                    Website (optional)
                  </label>
                  <input
                    type="text"
                    class="form-control"
                    id="form-website"
                    ng-model="formAdd.website"
                    >
                </div>
              </div>
              <div class="row">
                <div class="form-group col-sm-6">
                  <label for="form-username">
                    <span class="glyphicon glyphicon-user"></span>
                    Username
                  </label>
                  <input
                    type="text"
                    class="form-control"
                    id="form-username"
                    ng-model="formAdd.username"
                    >
                </div>
                <div class="form-group col-sm-6">
                  <label for="form-password">
                    <span class="glyphicon glyphicon-asterisk"></span>
                    Password
                  </label>
                  <div class="input-group">
                    <input
                      type="{{ passwordInputType }}"
                      class="form-control"
                      id="form-password"
                      ng-model="formAdd.password"
                      ng-change="computePasswordStrength(formAdd.password.length)"
                    >
                    <span class="input-group-btn">
                      <button
                        class="btn btn-default"
                        type="button"
                        ng-click="tooglePasswordDisplay()"
                      >
                        <span
                          class="glyphicon"
                          ng-class="{
                            'glyphicon-eye-close': passwordDisplayed,
                            'glyphicon-eye-open': !passwordDisplayed
                          }"
                        >
                        </span>
                      </button>
                    </span>
                  </div>
                  <h5>
                    <span class="glyphicon glyphicon-signal"></span>
                    password strength
                  </h5>
                  <div class="progress">
                    <div
                      class="progress-bar progress-bar-striped active"
                      role="progressbar"
                      aria-valuenow="50"
                      aria-valuemin="{{ passwordStrength }}"
                      aria-valuemax="100"
                      ng-style="{ width: passwordStrength + '%' }"
                      ng-class="progressbarType"
                      >
                      <span class="sr-only">{{ passwordStrength }}% Complete</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-default"
                data-dismiss="modal"
                >
                <span class="glyphicon glyphicon-remove"></span>
                Cancel
              </button>
              <button
                type="button"
                class="btn btn-primary"
                ng-click="addPassword(formAdd)"
                data-dismiss="{{ dismissForm }}"
                >
                <span class="glyphicon glyphicon-ok"></span>
                Add password
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Edit password dialog -->
      <div class="modal fade" id="editPasswordModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">
                <span aria-hidden="true">&times;</span>
                <span class="sr-only">Close</span>
              </button>
              <h4 class="modal-title" id="myModalLabel">
                <span class="glyphicon glyphicon-pencil"></span>
                Edit password
            </div>
            <div class="modal-body">
              <div class="row">
                <div class="form-group col-sm-6">
                  <label for="form-name">
                    <span class="glyphicon glyphicon-tag"></span>
                    Name
                  </label>
                  <input
                    type="text"
                    class="form-control"
                    id="form-name"
                    ng-model="formEdit.name"
                    >
                </div>
                <div class="form-group col-sm-6">
                  <label for="form-website">
                    <span class="glyphicon glyphicon-globe"></span>
                    Website (optional)
                  </label>
                  <input
                    type="text"
                    class="form-control"
                    id="form-website"
                    ng-model="formEdit.website"
                    >
                </div>
              </div>
              <div class="row">
                <div class="form-group col-sm-6">
                  <label for="form-username">
                    <span class="glyphicon glyphicon-user"></span>
                    Username
                  </label>
                  <input 
                    type="text"
                    class="form-control"
                    id="form-username"
                    ng-model="formEdit.username"
                    >
                </div>
                <div class="form-group col-sm-6">
                  <label for="form-password">
                    <span class="glyphicon glyphicon-asterisk"></span>
                    Password
                  </label>
                  <div class="input-group">
                    <input
                      type="{{ passwordInputType }}"
                      class="form-control"
                      id="form-password"
                      ng-model="formEdit.password"
                      ng-change="computePasswordStrength(formEdit.password.length)"
                    >
                    <span class="input-group-btn">
                      <button
                        class="btn btn-default"
                        type="button"
                        ng-click="tooglePasswordDisplay()"
                      >
                        <span
                          class="glyphicon"
                          ng-class="{
                            'glyphicon-eye-close': passwordDisplayed,
                            'glyphicon-eye-open': !passwordDisplayed
                          }"
                        >
                        </span>
                      </button>
                    </span>
                  </div>
                  <h5>
                    <span class="glyphicon glyphicon-signal"></span>
                    password strength
                  </h5>
                  <div class="progress">
                    <div 
                      class="progress-bar progress-bar-striped active"
                      role="progressbar"
                      aria-valuenow="50"
                      aria-valuemin="{{ passwordStrength }}"
                      aria-valuemax="100"
                      ng-style="{ width: passwordStrength + '%' }"
                      ng-class="progressbarType"
                      >
                      <span class="sr-only">{{ passwordStrength }}% Complete</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button 
                type="button" 
                class="btn btn-danger pull-left" 
                ng-click="deletePassword(editedItemIndex)"
                data-dismiss="{{ dismissForm }}"
                >
                <span class="glyphicon glyphicon-trash"></span>
                Delete
              </button>
              <button
                type="button"
                class="btn btn-default"
                data-dismiss="modal"
                >
                <span class="glyphicon glyphicon-remove"></span>
                Cancel
              </button>
              <button
                type="button"
                class="btn btn-primary"
                ng-click="editPassword(editedItemIndex, formEdit)"
                data-dismiss="{{ dismissForm }}"
                >
                <span class="glyphicon glyphicon-ok"></span>
                Save changes
              </button>
            </div>
          </div>
        </div>
      </div>  

      <!-- Passwords list -->
      <div class="well well-sm">

        <!-- You dont have any passwords alert -->
        <div class="alert alert-info" role="alert" ng-hide="data.length">
          You don't have any saved passwords to display. Start with clicking on Add password button.
        </div>

        <!-- Passwords list -->
        <div class="password-item" ng-repeat="item in data">
          <div class="name">
            <input
              type="text"
              class="form-control"
              ng-value="item.name"
              readonly
              >
          </div>
          <div class="options">
            <button
              type="button"
              class="btn btn-primary"
              data-toggle="modal"
              data-target="#editPasswordModal"
              ng-click="setEditedPasswordIndex($index); fillEditForm(item)"
                >
              <span class="glyphicon glyphicon-pencil"></span>
            </button>
          </div>
          <div class="controls">
            <div class="btn-group">
              <a 
                class="btn btn-default"
                href="{{ item.website }}"
                target="_blank"
                ng-disabled="!item.website"
                >
                <span class="glyphicon glyphicon-globe"></span>
                <span class="hidden-xs">Open website</span>
              </a>
              <button
                type="button"
                class="btn btn-default"
                clip-copy="item.username"
                clip-click="test()"
                >
                <span class="glyphicon glyphicon-user"></span>
                <span class="hidden-xs">Copy username</span>
              </button>
              <button
                type="button"
                class="btn btn-default"
                clip-copy="item.password"
                clip-click="test()"
                >
                <span class="glyphicon glyphicon-asterisk"></span>
                <span class="hidden-xs">Copy password</span>
              </button>
            </div>
          </div>
        </div>

        <!-- Add password button -->
        <button
          type="button"
          class="btn btn-primary add-password"
          data-toggle="modal"
          data-target="#addPasswordModal"
          ng-click="clearAddFrom()"
          >
          <span class="glyphicon glyphicon-file"></span>
          Add password
        </button>

      </div>
    </div>

    <!-- Footer -->
    <div class="footer">
      <a href="http://satoshilabs.com/" target="_blank"><mark>SatoshiLabs</mark></a> homework
      <span class="pull-right">Made by <b>Huřťak</b>
        <a href="mailto:petr.hurtak@gmail.com">
          <button type="button" class="btn btn-primary btn-xs">
            <span class="glyphicon glyphicon-envelope"></span>
            Mail
          </button>
        </a>
      </span>
    </div>

    <script src="js/vendor.js"></script>
    
    <script src="js/plugins.js"></script>

    <script src="js/main.js"></script>

  </body>
</html>