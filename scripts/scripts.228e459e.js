"use strict";angular.module("PasswordManager",["ngRoute","ngTouch","ngClipboard"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("PasswordManager").controller("MainCtrl",["$scope","StorageService",function(a,b){var c=b.get();a.data=c,a.editedItemIndex=0,a.formNew={},a.formEdit={},a.dismissForm="",a.passwordDisplayed=!1,a.passwordInputType="password",a.passwordStrength=0;var d=function(a){var b=[];return a.name||b.push("item name"),a.username||b.push("username"),a.password||b.push("password"),0===b.length?!1:"You need to fill "+b.join(", ")+" before sending the form."},e=function(a){return a&&!/^https?:[/]{2}/.test(a)?"http://"+a:a},f=function(){a.passwordDisplayed=!1,a.passwordInputType="password"},g=function(){for(var a=[],d=0;d<c.length;d++)a.push({name:c[d].name,website:c[d].website,username:c[d].username,password:c[d].password});b.put(a)};a.addPassword=function(b){var f=d(b);f?(a.dismissForm=!1,alert(f)):(c.push({name:b.name.trim(),website:e(b.website.trim()),username:b.username.trim(),password:b.password}),a.formNew={},a.passwordStrength=0,a.dismissForm="modal",g())},a.deletePassword=function(b){var d=confirm("Do you really want to delete this password?");d?(c.splice(b,1),a.dismissForm="modal",g()):a.dismissForm=""},a.editPassword=function(b,f){var h=d(f);if(a.dismissForm="",h)alert(h);else{var i=confirm("Do you really want to save changes you made?");i&&(c[b]={name:f.name,website:e(f.website),username:f.username,password:f.password},a.dismissForm="modal",g())}},a.setEditedPasswordIndex=function(b){a.editedItemIndex=b},a.fillEditForm=function(b){f(),a.computePasswordStrength(b.password.length),a.formEdit={name:b.name,website:b.website,username:b.username,password:b.password}},a.clearAddFrom=function(){f(),a.passwordStrength=0,a.formAdd={name:"",website:"",username:"",password:""}},a.tooglePasswordDisplay=function(){a.passwordDisplayed?(a.passwordInputType="password",a.passwordDisplayed=!1):(a.passwordInputType="text",a.passwordDisplayed=!0)},a.computePasswordStrength=function(b){var c=16,d=0,e="";d=b>c?100:Math.round(b/c*100),50>d?e="progress-bar-danger":80>d&&(e="progress-bar-warning"),a.passwordStrength=d,a.progressbarType=e}}]),angular.module("PasswordManager").factory("StorageService",function(){var a="passwords";return{get:function(){return JSON.parse(localStorage.getItem(a)||"[]")},put:function(b){localStorage.setItem(a,JSON.stringify(b))}}});